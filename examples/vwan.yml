lab:
  name: vwan

kinds:
  - gobgp:
      image: localhost/gobgp:latest
  - frr:
      image: localhost/frr:latest
  - bird:
      image: localhost/bird:latest

routers:
  vwan-eu-west:
    asn: 65515
    kind: frr
    graph_pos: [100, 0]
  vwan-eu-north:
    asn: 65515
    kind: frr
    graph_pos: [150, 0]
  vwan-us-west:
    asn: 65515
    kind: frr
    graph_pos: [-150, 0]
  vwan-us-east:
    asn: 65515
    kind: frr
    graph_pos: [-100, 0]
  prisma-us-east:
    asn: 65534
    kind: frr
    graph_pos: [-100, 100]
  prisma-eu-west:
    asn: 65534
    kind: frr
    graph_pos: [100, 100]
  prisma-eu-north:
    asn: 65534
    kind: frr
    graph_pos: [150, 100]
  prisma-us-west:
    asn: 65534
    kind: frr
    graph_pos: [-150, 100]
  dc-us-east:
    asn: 65501
    kind: bird
    graph_pos: [-125, -150]
  dc-eu-west:
    asn: 65502
    kind: bird
    graph_pos: [125, -150]

links:
  - peers:
      prisma-eu-west:
        interface: eth9
        ip: 192.168.250.1/24
      prisma-eu-north:
        interface: eth9
        ip: 192.168.250.2/24
      prisma-us-east:
        interface: eth9
        ip: 192.168.250.3/24
      prisma-us-west:
        interface: eth9
        ip: 192.168.250.4/24
    graph_pos: [0, 100]
  - peers:
      vwan-eu-west:
        interface: eth9
        ip: 192.168.240.1/24
      vwan-eu-north:
        interface: eth9
        ip: 192.168.240.2/24
      vwan-us-west:
        interface: eth9
        ip: 192.168.240.3/24
      vwan-us-east:
        interface: eth9
        ip: 192.168.240.4/24
    as_prepend:
      - 65520
      - 65520
    graph_pos: [0, 25]
  - peers:
      dc-us-east:
        interface: eth9
        ip: 192.168.230.1/30
      dc-eu-west:
        interface: eth9
        ip: 192.168.230.2/30
  - peers:
      prisma-us-east:
        ip: 192.168.2.2/30
      vwan-us-west:
        ip: 192.168.2.1/30
  - peers:
      prisma-eu-west:
        ip: 192.168.2.6/30
      vwan-eu-west:
        ip: 192.168.2.5/30
  - peers:
      vwan-us-east:
        ip: 192.168.3.4/29
      vwan-us-west:
        ip: 192.168.3.3/29
      dc-us-east:
        ip: 192.168.3.1/29
    graph_pos: [-125, -75]
  - peers:
      vwan-eu-west:
        ip: 192.168.3.10/29
      vwan-eu-north:
        ip: 192.168.3.11/29
      dc-eu-west:
        ip: 192.168.3.9/29
    graph_pos: [125, -75]

networks:
  prisma-eu-west:
    - prefix: 172.16.111.0/24
      community: "65534:11"
    - prefix: 172.16.112.0/24
      community: "65534:11"
  prisma-us-east:
    - prefix: 172.16.131.0/24
      community: "65534:13"
    - prefix: 172.16.132.0/24
      community: "65534:13"
  vwan-eu-west:
    - prefix: 172.17.11.0/24
      community: 12076:50002
    - prefix: 172.17.12.0/24
      community: 12076:50002
    - prefix: 172.17.13.0/24
  vwan-eu-north:
    - prefix: 172.17.21.0/24
      community: 12076:50003
    - prefix: 172.17.22.0/24
      community: 12076:50003
  dc-eu-west:
    - prefix: 172.18.211.0/24
    - prefix: 172.18.212.0/24
  dc-us-east:
    - prefix: 172.18.231.0/24
    - prefix: 172.18.232.0/24
